[{"/Users/drorpoliak/projects/monthly/src/index.js":"1","/Users/drorpoliak/projects/monthly/src/App.js":"2","/Users/drorpoliak/projects/monthly/src/reportWebVitals.js":"3","/Users/drorpoliak/projects/monthly/src/redux/store.js":"4","/Users/drorpoliak/projects/monthly/src/redux/app.js":"5","/Users/drorpoliak/projects/monthly/src/redux/users.js":"6","/Users/drorpoliak/projects/monthly/src/auth/ProtectedRoute.js":"7","/Users/drorpoliak/projects/monthly/src/i18n/en.js":"8","/Users/drorpoliak/projects/monthly/src/auth/Login.js":"9","/Users/drorpoliak/projects/monthly/src/i18n/he.js":"10","/Users/drorpoliak/projects/monthly/src/utility/SimulateError.js":"11","/Users/drorpoliak/projects/monthly/src/components/Dashboard.js":"12","/Users/drorpoliak/projects/monthly/src/communication/Snackbar.js":"13","/Users/drorpoliak/projects/monthly/src/utility/ErrorBoundary.js":"14","/Users/drorpoliak/projects/monthly/src/styling/useTheme.js":"15","/Users/drorpoliak/projects/monthly/src/layout/Direction.js":"16","/Users/drorpoliak/projects/monthly/src/communication/useNotifications.js":"17","/Users/drorpoliak/projects/monthly/src/layout/Page.js":"18","/Users/drorpoliak/projects/monthly/src/api/fakeUsersApi.js":"19","/Users/drorpoliak/projects/monthly/src/components/Drawer.js":"20","/Users/drorpoliak/projects/monthly/src/editor/Editor.js":"21","/Users/drorpoliak/projects/monthly/src/editor/decorator.js":"22","/Users/drorpoliak/projects/monthly/src/editor/decoratorComponents.js":"23","/Users/drorpoliak/projects/monthly/src/editor/strategies.js":"24","/Users/drorpoliak/projects/monthly/src/editor/entities.js":"25","/Users/drorpoliak/projects/monthly/src/editor/selection.js":"26","/Users/drorpoliak/projects/monthly/src/editor/entityTypes.js":"27","/Users/drorpoliak/projects/monthly/src/editor/EntityDetails.js":"28","/Users/drorpoliak/projects/monthly/src/api/fakeEditorApi.js":"29","/Users/drorpoliak/projects/monthly/src/redux/content.js":"30","/Users/drorpoliak/projects/monthly/src/components/Home.js":"31","/Users/drorpoliak/projects/monthly/src/utility/proxies.js":"32","/Users/drorpoliak/projects/monthly/src/editor/Selector.js":"33","/Users/drorpoliak/projects/monthly/src/utility/appUtilities.js":"34","/Users/drorpoliak/projects/monthly/src/utility/debounce.js":"35","/Users/drorpoliak/projects/monthly/src/flow/Relations.js":"36"},{"size":638,"mtime":1609598797347,"results":"37","hashOfConfig":"38"},{"size":3003,"mtime":1612447748870,"results":"39","hashOfConfig":"38"},{"size":362,"mtime":1609513093073,"results":"40","hashOfConfig":"38"},{"size":243,"mtime":1611266430093,"results":"41","hashOfConfig":"38"},{"size":679,"mtime":1612447260451,"results":"42","hashOfConfig":"38"},{"size":1668,"mtime":1609602661413,"results":"43","hashOfConfig":"38"},{"size":484,"mtime":1609626768700,"results":"44","hashOfConfig":"38"},{"size":62,"mtime":1609622259408,"results":"45","hashOfConfig":"38"},{"size":4182,"mtime":1609626733816,"results":"46","hashOfConfig":"38"},{"size":68,"mtime":1609622295708,"results":"47","hashOfConfig":"38"},{"size":157,"mtime":1609599006959,"results":"48","hashOfConfig":"38"},{"size":1079,"mtime":1611416606184,"results":"49","hashOfConfig":"38"},{"size":1044,"mtime":1612110884139,"results":"50","hashOfConfig":"38"},{"size":971,"mtime":1609626913068,"results":"51","hashOfConfig":"38"},{"size":303,"mtime":1611855903146,"results":"52","hashOfConfig":"38"},{"size":509,"mtime":1609623338500,"results":"53","hashOfConfig":"38"},{"size":1017,"mtime":1612631744828,"results":"54","hashOfConfig":"38"},{"size":276,"mtime":1610378459869,"results":"55","hashOfConfig":"38"},{"size":1265,"mtime":1609603478913,"results":"56","hashOfConfig":"38"},{"size":4863,"mtime":1611412638141,"results":"57","hashOfConfig":"38"},{"size":3600,"mtime":1612795651288,"results":"58","hashOfConfig":"38"},{"size":479,"mtime":1612105018746,"results":"59","hashOfConfig":"38"},{"size":2904,"mtime":1612813932534,"results":"60","hashOfConfig":"38"},{"size":980,"mtime":1612814078624,"results":"61","hashOfConfig":"38"},{"size":4472,"mtime":1612799702145,"results":"62","hashOfConfig":"38"},{"size":590,"mtime":1612115038891,"results":"63","hashOfConfig":"38"},{"size":1659,"mtime":1612112090030,"results":"64","hashOfConfig":"38"},{"size":3124,"mtime":1612117266246,"results":"65","hashOfConfig":"38"},{"size":6837,"mtime":1612766084695,"results":"66","hashOfConfig":"38"},{"size":4504,"mtime":1612814202123,"results":"67","hashOfConfig":"38"},{"size":1269,"mtime":1611845035168,"results":"68","hashOfConfig":"38"},{"size":258,"mtime":1612102597366,"results":"69","hashOfConfig":"38"},{"size":2010,"mtime":1612448929747,"results":"70","hashOfConfig":"38"},{"size":532,"mtime":1612121317828,"results":"71","hashOfConfig":"38"},{"size":772,"mtime":1612197392132,"results":"72","hashOfConfig":"38"},{"size":2690,"mtime":1612795615962,"results":"73","hashOfConfig":"38"},{"filePath":"74","messages":"75","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"76"},"i6zbmn",{"filePath":"77","messages":"78","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"76"},{"filePath":"79","messages":"80","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"76"},{"filePath":"81","messages":"82","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"76"},{"filePath":"83","messages":"84","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"76"},{"filePath":"85","messages":"86","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"76"},{"filePath":"87","messages":"88","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"76"},{"filePath":"89","messages":"90","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"76"},{"filePath":"91","messages":"92","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"76"},{"filePath":"93","messages":"94","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"76"},{"filePath":"95","messages":"96","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"76"},{"filePath":"97","messages":"98","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"76"},{"filePath":"99","messages":"100","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"76"},{"filePath":"101","messages":"102","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"76"},{"filePath":"103","messages":"104","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"76"},{"filePath":"105","messages":"106","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"76"},{"filePath":"107","messages":"108","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"76"},{"filePath":"109","messages":"110","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"76"},{"filePath":"111","messages":"112","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"76"},{"filePath":"113","messages":"114","errorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"115","messages":"116","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"117","usedDeprecatedRules":"76"},{"filePath":"118","messages":"119","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"76"},{"filePath":"120","messages":"121","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"122","messages":"123","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"124","messages":"125","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"126","messages":"127","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"76"},{"filePath":"128","messages":"129","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"76"},{"filePath":"130","messages":"131","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"76"},{"filePath":"132","messages":"133","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"76"},{"filePath":"134","messages":"135","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"136","messages":"137","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"76"},{"filePath":"138","messages":"139","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"76"},{"filePath":"140","messages":"141","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"76"},{"filePath":"142","messages":"143","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"76"},{"filePath":"144","messages":"145","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"76"},{"filePath":"146","messages":"147","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},"/Users/drorpoliak/projects/monthly/src/index.js",[],["148","149"],"/Users/drorpoliak/projects/monthly/src/App.js",[],"/Users/drorpoliak/projects/monthly/src/reportWebVitals.js",[],"/Users/drorpoliak/projects/monthly/src/redux/store.js",[],"/Users/drorpoliak/projects/monthly/src/redux/app.js",[],"/Users/drorpoliak/projects/monthly/src/redux/users.js",[],"/Users/drorpoliak/projects/monthly/src/auth/ProtectedRoute.js",[],"/Users/drorpoliak/projects/monthly/src/i18n/en.js",[],"/Users/drorpoliak/projects/monthly/src/auth/Login.js",[],"/Users/drorpoliak/projects/monthly/src/i18n/he.js",[],"/Users/drorpoliak/projects/monthly/src/utility/SimulateError.js",[],"/Users/drorpoliak/projects/monthly/src/components/Dashboard.js",[],"/Users/drorpoliak/projects/monthly/src/communication/Snackbar.js",[],"/Users/drorpoliak/projects/monthly/src/utility/ErrorBoundary.js",[],"/Users/drorpoliak/projects/monthly/src/styling/useTheme.js",[],"/Users/drorpoliak/projects/monthly/src/layout/Direction.js",[],"/Users/drorpoliak/projects/monthly/src/communication/useNotifications.js",[],"/Users/drorpoliak/projects/monthly/src/layout/Page.js",[],"/Users/drorpoliak/projects/monthly/src/api/fakeUsersApi.js",[],"/Users/drorpoliak/projects/monthly/src/components/Drawer.js",["150","151","152","153","154","155"],"/Users/drorpoliak/projects/monthly/src/editor/Editor.js",["156"],"/** @jsxImportSource @emotion/react */\nimport React, { useState, useEffect, useCallback } from 'react'\nimport { useDispatch } from 'react-redux'\nimport { unwrapResult } from '@reduxjs/toolkit'\nimport { fetchContent, error, changes } from '../redux/content'\n\nimport { Editor, EditorState, RichUtils, convertFromRaw } from 'draft-js'\nimport 'draft-js/dist/Draft.css'\nimport Relations from '../flow/Relations'\n\nimport Selector, { emptyUserData } from './Selector'\nimport { createEntityFromSelection } from './entities'\nimport decorator from './decorator'\nimport parseSelection from './selection'\nimport Page from '../layout/Page'\n\nconst styles = {\n  container: theme => ({\n    display: 'grid',\n    gridTemplateColumns: '9fr 1fr',\n    padding: '1rem',\n  }),\n}\n\nconst MyEditor = () => {\n  const [editorState, setEditorState] = useState(() =>\n    EditorState.createEmpty()\n  )\n\n  const dispatch = useDispatch()\n\n  useEffect(() => {\n    const convertContent = rawContent => convertFromRaw(rawContent)\n\n    const showContent = content =>\n      setEditorState(EditorState.createWithContent(content, decorator))\n\n    dispatch(fetchContent({ convertContent, showContent }))\n      .then(unwrapResult)\n      .catch(serializedError => {\n        console.error(serializedError)\n        dispatch(error('content'))\n      })\n  }, [dispatch])\n\n  const [userData, setUserData] = useState(emptyUserData)\n  const [selectorOpen, setSelectorOpen] = useState(false)\n\n  // Todo: find if these useCallbacks are effective\n  const uSetSelectorOpen = useCallback(setSelectorOpen, [setSelectorOpen])\n  const uSetUserData = useCallback(setUserData, [setUserData])\n\n  const handleKeyCommand = (command, editorState) => {\n    const newState = RichUtils.handleKeyCommand(editorState, command)\n\n    if (newState) {\n      setEditorState(newState)\n      return 'handled'\n    }\n\n    return 'not-handled'\n  }\n\n  const handleChange = newEditorState => {\n    // only report changes that have the potential to change entities positions\n    // contentState immutability enables using referntial equality for comparison\n    const oldContent = editorState.getCurrentContent()\n    const newContent = newEditorState.getCurrentContent()\n    const contentChanged = newContent !== oldContent\n    if (contentChanged) dispatch(changes())\n\n    setEditorState(newEditorState)\n\n    const { selectionExists } = parseSelection(newEditorState)\n    if (selectionExists) setSelectorOpen(true)\n  }\n\n  const handleFocus = e => {\n    e.preventDefault()\n  }\n\n  const handleBlur = e => {\n    e.preventDefault()\n  }\n\n  useEffect(() => {\n    const { selectionExists, selectionSpansBlocks } = parseSelection(\n      editorState\n    )\n    if (selectionExists && selectionSpansBlocks) {\n      alert('Please select inside a single block') // ToDo: replace alert with a snackbar\n      return\n    }\n    if (selectionExists && userData.entityType) {\n      const newEditorState = createEntityFromSelection({\n        editorState,\n        userData,\n        dispatch,\n      })\n      setEditorState(newEditorState)\n      setUserData(emptyUserData)\n    }\n  }, [dispatch, editorState, userData])\n\n  return (\n    <Page>\n      <div css={styles.container}>\n        <Editor\n          editorState={editorState}\n          onChange={handleChange}\n          onFocus={handleFocus}\n          onBlur={handleBlur}\n          handleKeyCommand={handleKeyCommand}\n        />\n        <Selector\n          {...{\n            selectorOpen,\n            uSetSelectorOpen,\n            uSetUserData,\n          }}\n        />\n        {/* <Relations /> */}\n      </div>\n    </Page>\n  )\n}\nexport default MyEditor\n","/Users/drorpoliak/projects/monthly/src/editor/decorator.js",[],"/Users/drorpoliak/projects/monthly/src/editor/decoratorComponents.js",[],"/Users/drorpoliak/projects/monthly/src/editor/strategies.js",[],"/Users/drorpoliak/projects/monthly/src/editor/entities.js",[],"/Users/drorpoliak/projects/monthly/src/editor/selection.js",[],"/Users/drorpoliak/projects/monthly/src/editor/entityTypes.js",[],"/Users/drorpoliak/projects/monthly/src/editor/EntityDetails.js",[],"/Users/drorpoliak/projects/monthly/src/api/fakeEditorApi.js",[],"/Users/drorpoliak/projects/monthly/src/redux/content.js",[],"/Users/drorpoliak/projects/monthly/src/components/Home.js",[],"/Users/drorpoliak/projects/monthly/src/utility/proxies.js",[],"/Users/drorpoliak/projects/monthly/src/editor/Selector.js",[],"/Users/drorpoliak/projects/monthly/src/utility/appUtilities.js",[],"/Users/drorpoliak/projects/monthly/src/utility/debounce.js",[],"/Users/drorpoliak/projects/monthly/src/flow/Relations.js",["157"],{"ruleId":"158","replacedBy":"159"},{"ruleId":"160","replacedBy":"161"},{"ruleId":"162","severity":1,"message":"163","line":5,"column":8,"nodeType":"164","messageId":"165","endLine":5,"endColumn":14},{"ruleId":"162","severity":1,"message":"166","line":6,"column":8,"nodeType":"164","messageId":"165","endLine":6,"endColumn":15},{"ruleId":"162","severity":1,"message":"167","line":8,"column":8,"nodeType":"164","messageId":"165","endLine":8,"endColumn":19},{"ruleId":"162","severity":1,"message":"168","line":9,"column":8,"nodeType":"164","messageId":"165","endLine":9,"endColumn":18},{"ruleId":"162","severity":1,"message":"169","line":12,"column":8,"nodeType":"164","messageId":"165","endLine":12,"endColumn":16},{"ruleId":"162","severity":1,"message":"170","line":90,"column":9,"nodeType":"164","messageId":"165","endLine":90,"endColumn":25},{"ruleId":"162","severity":1,"message":"171","line":9,"column":8,"nodeType":"164","messageId":"165","endLine":9,"endColumn":17},{"ruleId":"162","severity":1,"message":"172","line":58,"column":19,"nodeType":"164","messageId":"165","endLine":58,"endColumn":27},"no-native-reassign",["173"],"no-negated-in-lhs",["174"],"no-unused-vars","'AppBar' is defined but never used.","Identifier","unusedVar","'Toolbar' is defined but never used.","'CssBaseline' is defined but never used.","'Typography' is defined but never used.","'MenuIcon' is defined but never used.","'handleDrawerOpen' is assigned a value but never used.","'Relations' is defined but never used.","'relation' is assigned a value but never used.","no-global-assign","no-unsafe-negation"]